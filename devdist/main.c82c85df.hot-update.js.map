{"version":3,"sources":["webpack://codex-frontend/./src/components/filterFields/mapUtils/PointDistanceMap.jsx","webpack://codex-frontend/webpack/runtime/getFullHash"],"names":["lastMarker","lastCircle","PointDistanceMap","distance","latitude","longitude","gps","onChange","openCount","rest","useState","mapObject","setMapObject","mapsApi","setMapsApi","console","log","draw","lat","lng","setMap","markerPosition","LatLng","circle","Circle","center","radius","strokeColor","strokeWeight","strokeOpacity","fillColor","fillOpacity","marker","Marker","position","useEffect","setOptions","get","parseFloat","height","width","maxWidth","maxHeight","key","googleMapsApiKey","minZoom","map","maps"],"mappings":"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","file":"main.c82c85df.hot-update.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { get } from 'lodash-es';\nimport GoogleMapReact from 'google-map-react';\nimport { googleMapsApiKey } from '../../../constants/apiKeys';\n\nlet lastMarker = null;\nlet lastCircle = null;\n\n/* component expects distance in kilometers */\nexport default function PointDistanceMap({\n  distance = 50,\n  latitude,\n  longitude,\n  gps,\n  onChange,\n  openCount,\n  ...rest\n}) {\n  const [mapObject, setMapObject] = useState(null);\n  const [mapsApi, setMapsApi] = useState(null);\n\n  console.log(openCount);\n\n  function draw(lat, lng) {\n    if (lastMarker) lastMarker.setMap(null); // remove old marker\n    if (lastCircle) lastCircle.setMap(null); // remove old circle\n\n    console.log('draw called with', lat, lng, mapsApi);\n    const markerPosition = new mapsApi.LatLng(lat, lng);\n\n    const circle = new mapsApi.Circle({\n      center: markerPosition,\n      radius: 1000 * distance,\n      strokeColor: '#000000',\n      strokeWeight: 2,\n      strokeOpacity: 0.8,\n      fillColor: '#000000',\n      fillOpacity: 0.35,\n    });\n\n    circle.setMap(mapObject);\n\n    const marker = new mapsApi.Marker({\n      position: markerPosition,\n    });\n    marker.setMap(mapObject);\n\n    lastMarker = marker;\n    lastCircle = circle;\n  }\n\n  useEffect(\n    () => {\n      if (lastCircle) {\n        lastCircle.setOptions({\n          radius: 1000 * distance,\n        });\n      }\n    },\n    [distance],\n  );\n\n  useEffect(\n    () => {\n      const lat = get(gps, '0');\n      const lng = get(gps, '1');\n      if (lat && lng) draw(parseFloat(lat), parseFloat(lng));\n    },\n    [gps],\n  );\n\n  useEffect(\n    () => {\n      if (latitude && longitude) draw(latitude, longitude);\n    },\n    [openCount],\n  );\n\n  return (\n    <div\n      style={{\n        height: 400,\n        width: 500,\n        maxWidth: '100%',\n        maxHeight: '50vh',\n      }}\n    >\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: googleMapsApiKey }}\n        defaultCenter={{\n          lat: 0,\n          lng: 0,\n        }}\n        defaultZoom={1.3}\n        options={{ minZoom: 1 }}\n        onClick={({ lat, lng }) => {\n          onChange({ lat, lng });\n          draw(lat, lng);\n        }}\n        yesIWantToUseGoogleMapApiInternals\n        onGoogleApiLoaded={({ map, maps }) => {\n          setMapObject(map);\n          setMapsApi(maps);\n        }}\n        {...rest}\n      />\n    </div>\n  );\n}\n","__webpack_require__.h = () => (\"6c9c67f2\")"],"sourceRoot":""}