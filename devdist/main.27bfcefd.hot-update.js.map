{"version":3,"sources":["webpack://codex-frontend/./src/App.jsx","webpack://codex-frontend/webpack/runtime/getFullHash"],"names":["Intl","NumberFormat","__addLocaleData","enPolyfill","esPolyfill","messageMap","en","messagesEn","es","messagesEs","ScrollToTop","useLocation","pathname","useEffect","window","scrollTo","reducer","state","action","type","data","sightingsNeedsFetch","siteSettingsNeedsFetch","siteSettingsSchemaNeedsFetch","siteSettingsSchema","siteSettingsVersion","siteSettings","me","console","warn","ContextualizedApp","locale","useSelector","selectLocale","useSiteSettings","error","adminUserInitialized","get","primaryColor","theme","createTheme","materialTheme","App","useReducer","initialState","dispatch"],"mappings":"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","file":"main.27bfcefd.hot-update.js","sourcesContent":["import React, { useEffect, useReducer } from 'react';\nimport { BrowserRouter, useLocation } from 'react-router-dom';\nimport { get } from 'lodash-es';\nimport { IntlProvider } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport '@formatjs/intl-numberformat/polyfill';\nimport enPolyfill from '@formatjs/intl-numberformat/dist/locale-data/en';\nimport esPolyfill from '@formatjs/intl-numberformat/dist/locale-data/es';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {\n  createTheme,\n  ThemeProvider,\n} from '@material-ui/core/styles';\n\nimport useSiteSettings from './models/site/useSiteSettings';\nimport { selectLocale } from './modules/app/selectors';\nimport materialTheme from './styles/materialTheme';\nimport messagesEn from '../locale/en.json';\nimport messagesEs from '../locale/es.json';\nimport { AppContext, initialState } from './context';\nimport FrontDesk from './FrontDesk';\nimport SadScreen from './components/SadScreen';\nimport ErrorBoundary from './ErrorBoundary';\n\n// polyfill to enable formatting of a number using the unit prop\nif (typeof Intl.NumberFormat.__addLocaleData === 'function') {\n  Intl.NumberFormat.__addLocaleData(enPolyfill);\n  Intl.NumberFormat.__addLocaleData(esPolyfill);\n}\n\nconst messageMap = {\n  en: messagesEn,\n  es: messagesEs,\n};\n\nfunction ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => window.scrollTo(0, 0), [pathname]);\n\n  return null;\n}\n\nfunction reducer(state, action) {\n  const { type, data } = action;\n  if (type === 'SET_SIGHTINGS_NEEDS_FETCH') {\n    return { ...state, sightingsNeedsFetch: data };\n  }\n  if (type === 'SET_SITE_SETTINGS_NEEDS_FETCH') {\n    return { ...state, siteSettingsNeedsFetch: data };\n  }\n  if (type === 'SET_SITE_SETTINGS_SCHEMA_NEEDS_FETCH') {\n    return { ...state, siteSettingsSchemaNeedsFetch: data };\n  }\n  if (type === 'SET_SITE_SETTINGS_SCHEMA') {\n    return { ...state, siteSettingsSchema: data };\n  }\n  if (type === 'SET_SITE_SETTINGS_VERSION') {\n    return { ...state, siteSettingsVersion: data };\n  }\n  if (type === 'SET_SITE_SETTINGS') {\n    return { ...state, siteSettings: data };\n  }\n  if (type === 'SET_ME') {\n    return { ...state, me: data };\n  }\n  console.warn('Action not recognized', action);\n  return state;\n}\n\nfunction ContextualizedApp() {\n  const locale = useSelector(selectLocale);\n  const { data, error } = useSiteSettings();\n\n  const adminUserInitialized = get(data, 'site.adminUserInitialized');\n  const primaryColor = get(data, ['site.look.themeColor', 'value']);\n\n  if (error) return <SadScreen variant=\"serverError\" />;\n  if (!primaryColor) return null;\n  const theme = createTheme(materialTheme(primaryColor));\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <IntlProvider\n        locale={locale}\n        defaultLocale=\"en\"\n        messages={messageMap[locale]}\n      >\n        <BrowserRouter basename=\"/\">\n          <ScrollToTop />\n          <ErrorBoundary>\n            <FrontDesk adminUserInitialized={adminUserInitialized} />\n          </ErrorBoundary>\n        </BrowserRouter>\n      </IntlProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default function App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <AppContext.Provider value={{ state, dispatch }}>\n      <ContextualizedApp />\n    </AppContext.Provider>\n  );\n}\n","__webpack_require__.h = () => (\"715a279f\")"],"sourceRoot":""}