{"version":3,"sources":["webpack://codex-frontend/./src/components/filterFields/mapUtils/PointDistanceMap.jsx","webpack://codex-frontend/webpack/runtime/getFullHash"],"names":["lastMarker","lastCircle","PointDistanceMap","distance","latitude","longitude","gps","openCount","onChange","rest","useState","mapObject","setMapObject","mapsApi","setMapsApi","mapsApiRef","useRef","current","mapObjectRef","draw","lat","lng","setMap","safeMapsApi","safeMapObject","markerPosition","LatLng","circle","Circle","center","radius","strokeColor","strokeWeight","strokeOpacity","fillColor","fillOpacity","marker","Marker","position","mapReadyToRender","useEffect","setOptions","get","parseFloat","height","width","maxWidth","maxHeight","key","googleMapsApiKey","minZoom","map","maps"],"mappings":"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","file":"main.458a1dea.hot-update.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { get } from 'lodash-es';\nimport GoogleMapReact from 'google-map-react';\nimport { googleMapsApiKey } from '../../../constants/apiKeys';\n\nlet lastMarker = null;\nlet lastCircle = null;\n\n/* component expects distance in kilometers */\nexport default function PointDistanceMap({\n  distance = 50,\n  latitude,\n  longitude,\n  gps,\n  openCount,\n  onChange,\n  ...rest\n}) {\n  const [mapObject, setMapObject] = useState(null);\n  const [mapsApi, setMapsApi] = useState(null);\n  const mapsApiRef = useRef(null);\n  mapsApiRef.current = mapsApi;\n  const mapObjectRef = useRef(null);\n  mapObjectRef.current = mapsApi;\n\n  function draw(lat, lng) {\n    if (lastMarker) lastMarker.setMap(null); // remove old marker\n    if (lastCircle) lastCircle.setMap(null); // remove old circle\n\n    const safeMapsApi = mapsApi || mapsApiRef.current;\n    const safeMapObject = mapObject || mapObjectRef.current;\n\n    if (!safeMapsApi || !safeMapObject) return;\n\n    const markerPosition = new safeMapsApi.LatLng(lat, lng);\n\n    const circle = new safeMapsApi.Circle({\n      center: markerPosition,\n      radius: 1000 * distance,\n      strokeColor: '#000000',\n      strokeWeight: 2,\n      strokeOpacity: 0.8,\n      fillColor: '#000000',\n      fillOpacity: 0.35,\n    });\n\n    circle.setMap(safeMapObject);\n\n    const marker = new safeMapsApi.Marker({\n      position: markerPosition,\n    });\n    marker.setMap(safeMapObject);\n\n    lastMarker = marker;\n    lastCircle = circle;\n  }\n\n  const mapReadyToRender = mapsApi && mapObject;\n\n  useEffect(\n    () => {\n      if (lastCircle) {\n        lastCircle.setOptions({\n          radius: 1000 * distance,\n        });\n      }\n    },\n    [distance],\n  );\n\n  useEffect(\n    () => {\n      const lat = get(gps, '0');\n      const lng = get(gps, '1');\n      if (lat && lng) draw(parseFloat(lat), parseFloat(lng));\n    },\n    [gps],\n  );\n\n  useEffect(\n    () => {\n      if (latitude && longitude) {\n        draw(parseFloat(latitude), parseFloat(longitude));\n      }\n    },\n    [mapReadyToRender],\n  );\n\n  return (\n    <div\n      style={{\n        height: 400,\n        width: 500,\n        maxWidth: '100%',\n        maxHeight: '50vh',\n      }}\n    >\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: googleMapsApiKey }}\n        defaultCenter={{\n          lat: 0,\n          lng: 0,\n        }}\n        defaultZoom={1.3}\n        options={{ minZoom: 1 }}\n        onClick={({ lat, lng }) => {\n          onChange({ lat, lng });\n          draw(lat, lng);\n        }}\n        yesIWantToUseGoogleMapApiInternals\n        onGoogleApiLoaded={({ map, maps }) => {\n          setMapObject(map);\n          setMapsApi(maps);\n        }}\n        {...rest}\n      />\n    </div>\n  );\n}\n","__webpack_require__.h = () => (\"07802a45\")"],"sourceRoot":""}